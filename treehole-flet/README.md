# PKU-Hole-Flet

## Important

根据《X大树洞服务协议》3.4条之规定：

> 3.4 用户不得使用非官方的客户端、脚本等访问方式，未经X大树洞管理团队明确许可，访问X大树洞的相关服务、下载X大树洞服务提供的相关内容；不得以任何方式（包括但不限于机器人软件、爬虫软件等任何自动程序、脚本、软件）和任何理由自行或委托他人、协助他人获取平台的服务、内容、数据；不得将有关干扰、破坏或限制任何计算机软件、硬件或通讯设备功能的软件病毒或其他计算机代码、档案和程序之资料，进行上传、复制、传送、传播等；不得干扰或破坏树洞服务或与树洞服务相连的服务器和网络，或不遵守本协议之规定；对于使用非官方途径访问X大树洞服务的，管理团队有权封禁相关账号并追究法律责任。

**本程序仅用作学习Flet框架技术的练手项目**，从始至终只使用树洞官方的api，输入学号和密码只是为了获取jwt认证，全程不存储和记录任何数据、**仅供学习交流使用**，本人仅做了程序开发，不代表本人曾经或正在使用本程序访问树洞，访问树洞请认准官方渠道。

## Requirements

```bash
pip install flet requests retrying
```

## Why Flet?

### 1. Easy

It's just Python. No frontend experience needed.

### 2. Beautiful

Use google material design to create your own flutter App.

### 3. Cross-Platform

You could easily pack your app as Windows,MacOS,Linux applications, even deploy a web app by just change one argument.

## Features

### 1. 外观

采用Material Design，明暗两套模式切换，外观**遥遥领先于同行**（至少开发者自己是这么认为的）

### 2. 高度自定义

窗口透明度、字体大小、字重、加载数目全部可自定义，使用体验**遥遥领先于同行**

### 3. 防沉迷

为了减少官方服务器的负载**（~~其实是开发者他不会写~~）**，采用有限加载的方式，用户可以自己设定每次加载的最大数目，默认不能超过300，有效防止沉迷树洞，防沉迷效果**遥遥领先于同行**

### 4. 引用树洞

与同行引用PID只能引用一个，多了还需要手动点击跳转相比，本程序支持一次性展示所有提到的洞，阅读体验**遥遥领先于同行**

### 5. 图片显示

同行的图片不可放大查看（需要依赖浏览器插件或手动访问），本程序支持点击图片以原始分辨率显示，显示效果**遥遥领先于同行**

### 6. 复制与外链

支持点击树洞/评论即自动复制内容到剪贴板，快捷程度**遥遥领先于同行**，如果有外链，点击即可访问；树洞PID同理

### 7. 成绩查询（由于缺乏样本数据尚未完成开发）

提供更加有趣的动画

### 8. 外部服务支持

与同行严格封禁所有外部服务相比，本程序支持一键访问课程测评、旧版成绩查询、课程资料获取等服务，开放程度**遥遥领先于同行**

### 9. 轻量化

采用单文件开发**（~~其实是开发者他懒得分文件写~~）**，磁盘占用**遥遥领先于同行**

### 10. 国际化

与同行不支持英文相比，本程序由开发者亲自操刀翻译**（~~水平非常烂~~）**，全英文界面，国际化程度**遥遥领先于同行**

## issues

### 1. 慢

Python的通病了

### 2. 内存、处理器资源占用率高

由于开发者不会写前端，所以采用了多线程在后台加载树洞的模式。同时由于默认展开所有评论和引用，加载速度明显落后于同行

### 3. 偶发性Bug

偶尔会遇到加载过程中无法正确获取json数据的情况，目前尚未查明原因

### 4. 嵌套引用处理

目前只能处理两层（在当前树洞提到的树洞里引用了另一个树洞），多了处理不了

### 5. 刷新机制问题

点击收藏或回复树洞后页面无自动刷新（因为刷新一次太费时间了），且由于本地不存储数据，每次返回主页都需要重新请求所有数据

### 6. 一大堆Bug正在路上
